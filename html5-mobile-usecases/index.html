<!DOCTYPE HTML>
<html lang="en">
<head>
	<title>Shower Presentation Engine</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=792, user-scalable=no">
	<link href='http://fonts.googleapis.com/css?family=Coming+Soon' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="../bower_components/shower-bright/styles/screen.css">
	<link rel="stylesheet" href="screen-custom.css">
	<link rel="stylesheet" href="../prism/prism.css">
	<!--
		To apply styles to the certain slides
		set slide ID to get needed elements
		-->
	<style>
		#Picture h2 {
			color:#FFF;
			}
	</style>
</head>
<body class="list">
	
	<header class="caption">
		<h1>CoreMob Camera App:<br>Real Life HTML5 Use Cases for Mobile</h1>
		<p><a href="http://girliemac.com">Tomomi Imura</a>, <a href="http://twitter.com/girlie_mac">@girlie_mac</a></p>
	</header>
	
	
	<section class="slide cover dark"><div>
		<h2>Real Life HTML5 Use Cases for Mobile</h2>
		<h4 style="color:#fff;font-size:42px;margin-left:-50px;">CoreMob Camera App</h4>
		<img src="images/sandy.jpg" style="width:1024px;height:640px;" alt="Sabdy the cat using a mobile phone">
	</div></section>
	
	
	<section class="slide"><div>
		<!-- Hello, my name is CSS sticker -->
		<div class="vcard" style="margin: 120px auto; cursor:pointer" onclick="javascript:this.className='vcard anim'"> 
		    <div> 
		        <p>Hello</p> 
		        <p>my name is</p> 
		    </div> 
		    <div class="fn"> 
		        <p class="given-name">Tomomi</p> 
		        <address class="nickname">@girlie_mac</address> 
		    </div>
		</div>
		<!-- sticker end -->
		<ul class="animList" style="position:relative; left: 180px;">
			<li>Mobile Front-end, UI/UX Developer</li>
			<li>Open Web Advocate at Nokia</li>
			<li>Formally at Palm webOS, Yahoo! Mobile etc.</li>
			<li>HTTP Status Cats lady</li>
		</ul>
	</div></section>
	
	<section class="slide cover"><div>
		<img src="../html5-mobile-approach/images/403.jpg" alt="HTTP Status Cats" style="width:1024px;height:640px;">
	</div></section>
	
	<section class="slide cover dark"><div>
		<h2 style="margin-top:390px">Mobile (vs. Sessile)</h2>
		<img src="images/jellyfish.jpg" alt="Hillary Clinton texting" style="height:640px;">
		<p class="credit white">Luc Viatour | www.Lucnix.be &bull; &amp; &bull; caitbiology.wikispaces.com</p>
	</div></section>
	
	<section class="slide cover dark"><div>
		<h2>Communicating</h2>
		<img src="images/hillary-clinton-blackberry.jpg" alt="Hillary Clinton texting" style="height:640px;">
		<p class="credit white">AP PHOTO / Kevin Lamarque</p>
		
		<footer>
			We make phone calls, of course, and texting, as much as IM'ing, maybe tweeting.
		</footer>
	</div></section>
	
	<section class="slide cover dark"><div>
		<h2>Reading</h2>
		<img src="images/reading.jpg" alt="Tokyo bus" style="width:1024px;height:640px;">
		<p class="credit white">http://www.flickr.com/photos/mi-ki/2454554920/</p>
		
		<footer>
			When you're waiting for a train, or already on a train, you may be reading news.
			You may be reading a magazine on larger devices like tablet or Kindle.
		</footer>
	</div></section>

	<section class="slide cover dark"><div>
		<h2>Playing</h2>
		<img src="images/angrybirds.jpg" alt="A bird playing Angry Birds" style="width:1024px;height:640px;">
		<p class="credit white">http://www.flickr.com/photos/potyike/4599545293/</p>
		
		<footer>
			Playing games, is an another popular activity on mobile phones.
		</footer>
	</div></section>
	
	<section class="slide cover dark"><div>
		<h2>Taking<br>Pictures</h2>
		<img src="images/phototaking.jpg" alt="A man taking his own picture" style="width:1024px;height:640px;">
		<p class="credit white">http://www.flickr.com/photos/insane_capture/8113802393/</p>
		
		<footer>
			Taking interesting pictures anywhere you go, then give them some vignette filter and tweet away.
		</footer>
	</div></section>
	
	<section class="slide cover dark"><div>
		<h2>Locating</h2>
		<img src="images/location.jpg" alt="Google pin" style="width:1024px;height:640px;">
		<p class="credit white">http://www.flickr.com/photos/hezicohen/4648981682/</p>
		
		<footer>
- Locate yourself, search point of interests nearby.
- Directions, may be weather at the location on the go.
- finding the nearest train station, you use your mobile phone to locate where you are.
- checking in at a restaurant with Foursquare.
- tracking for your jogging routine.
		</footer>
	</div></section>
	
	<section class="slide cover dark"><div>
		<h2>Paying</h2>
		<img src="images/suica.jpg" alt="Suica mobile payment" style="width:1024px;height:640px;">
		<p class="credit white">http://www.flickr.com/photos/u-suke/100870738/</p>
		
		<footer>
			Paying someone on PayPal. or you may be paying for a cup of coffee, or even riding a subway train, with an NFC-enabled phone.
			The pictured system is called Mobile Suica, a prepaid e-money for moving around and shopping in the Tokyo  metro area.
		</footer>
	</div></section>
	
	<section class="slide"><div>
		<h2>More...</h2>
		<img src="images/ocr.png" align="right" style="width:300px; margin-right: -40px">
		<ul>
			<li>Listening music, watching movies</li>
			<li>Searching & browsing web</li>			
			<li>Chat, video calls</li>
			<li>Note taking (Text, voice, camera input)</li>
			<li>Scanning, OCR, Translations (AR)</li>
			<li>etc.</li>
		</ul>
		<footer>
		</footer>
		<p class="credit">iphonelife.com</p>
	</div></section>
	
	
	<section class="slide cover"><div>
		<img src="images/html5.png" alt="HTML5" style="width:1024px;height:640px;">
		<p class="credit">http://lemarquis.deviantart.com/art/HTML5-Wallpaper-243682854</p>
		<footer>What about HTML5?</footer>
	</div></section>	
	
<!--
	
		
		<section class="slide" style="background:#fff url(images/asha300.jpg) 700px 120px no-repeat">
		<div>
			<h2>Making a Call (or SMS)</h2>
			<pre style=""><code class="language-markup">		
	&lt;a href="tel:+14155557777"&gt;
	  Order Pizza Now!
	&lt;/a&gt;
	
	&lt;a href="sms:+14155558888?body=Hello"&gt;
	  Text me!
	&lt;/a&gt;
			</code></pre>
			
			<footer>
				URL Schemes - Old-school from XHTML-MP by OMA and still rocks.
				You can initiate a phone call or texting easily with a element.
			</footer>
		</div></section>
	
	
		<section class="slide" style="background:#fff url(images/kanazawa.jpg) right top no-repeat">
		<div>
			<h2>Locating</h2>
			<pre style="margin-top: -20px"><code class="language-javascript">		
	if (navigator.geolocation) {
	  navigator.geolocation.getCurrentPosition(success, fail);
	}
	
	function success(position) {
	  alert('Latitude: '+ position.coords.latitude + 
	  ', Longitude: '+ position.coords.longitude);
	}
			</code></pre>
			
			<p><em>Kanazawa no Sakamichi</em> &bull; stamp-pon.com/slopes</p>
			<p class="credit white">http://www.flickr.com/photos/icgm/5470416802/</p>
			
			<footer>
				Hardware has more than a few ways to detect your location:
				- GPS satellites
				- GSM/CDMA cell IDs
				- A-GPS
				- Wi-Fi base stations
			</footer>
		</div></section>
		
		
		<section class="slide"><div>
			<h2>Supporting Various Screen Types</h2>
			
			<p>CSS Media-queires</p>
			
			<div style="margin-left:340px">
			<pre style="margin-top: -20px"><code class="language-css">
	@media only screen 
	   and (min-device-width: 768px) 
	   and (max-device-width: 1024px) 
	   and (orientation: landscape) {
	      /* styles */
	}
			</code></pre>
			</div>
			<img src="images/rwd.png" style="width:340px; margin-top:-160px;margin-left:-30px;">
			
			<footer>
				Using Media-queries to control the presentation of content, without modifying the content itself.
				The idea of adaptive design has been around for a while, but the term RWD was a huge buzz last year.
			</footer>
		</div></section>
		
		
		<section class="slide">
		<div>
			<h2>Publishing</h2>
			<img src="images/ft.png" align="right" style="margin-right: -20px">
			<ul>
				<li>CSS Media-queries</li>
				<li>CSS Flexbox / Grid</li>
				<li>Touch events</li>
				<li>Offline storage</li>
			</ul>
			
			<p class="credit">Financial Times</p>
			<footer>
				...
			</footer>
		</div></section>
			
		
		<section class="slide">
		<div>
			<h2>Gaming</h2>
		
			<ul>
				<li>Canvas</li>
				<li>Touch events</li>
				<li>Audio</li>
				<li>CSS Animations and Transforms</li>
				<li>Web Sockets</li>
				<li>WebGL for 3D Gaiming</li>
			</ul>
			<footer>
				...
			</footer>
		</div></section>
		
	
-->
		
	<section class="slide">
	<div>
		<h2>Core Mobile Web Platform CG</h2>
		<img src="images/w3c-community-logo.png" alt="W3C CG logo" align="right" style="margin-right:-20px">
		
		<h3 class="left">Goal:</h3>
		
		<p style="margin-top:1.3em; font-size:1.2em;">
			To accelerate the adoption of the Mobile Web as a compelling platform for the development of modern mobile Web applications
		</p>

		<footer>
Last year, W3C announced an industry-wide initiative, called Core Mobile Web Platform Community Group (CoreMob CG, for short), to help improve the mobile web.
			
The goal of the CoreMob is to accelerate the adoption of the Mobile Web as a compelling platform for the development of modern mobile Web applications. 
			
In order to achieve this mission, the CG brings developers, equipment manufacturers, browser vendors, operators and other relevant members of the industry together.
			
The companies includes -
Nokia, Samsung, AT&T, Verizon, Vodafone, Orange, Telefónica, KDDI, Softbank Qualcomm, Intel, Texas Instruments, Mozilla, Opera, Microsoft and Facebook and more.
			
		</footer>
		<p class="credit">http://coremob.github.com/coremob-2012/</p>
	</div></section>
	
	
	<section class="slide">
	<div>
		<h2>Core Mobile Web Platform CG</h2>
		<img src="images/w3c-community-logo.png" alt="W3C CG logo" align="right" style="margin-right:-20px">

		<ol>
			<li>Agree on core features developers can depend on</li>
			<li>Compile related conformance test suites</li>
			<li>Provide use cases, scenarios, and other input to drive successful mobile deployment</li>
		</ol>
		
		<footer>
		and we get together to:
			1. Agree on core features developers can depend on. These will be defined by reference to a variety of other specifications from the W3C and other standards bodies.
			2. Compile related conformance test suites.
			3. Provide to W3C (and non-W3C) groups use cases, scenarios, and other input to drive successful mobile deployment.
		</footer>
		<p class="credit">http://coremob.github.com/coremob-2012/</p>
	</div></section>
	
	
<!--
	<section class="slide">
	<div>
		<h2>Core Mobile Web Platform — 2012</h2>
		
		<h4>http://coremob.github.com/coremob-2012</h4>
		<iframe src="http://coremob.github.com/coremob-2012/" style="width:100%;height:400px"></iframe>
		
		<footer>
			The final CG specification is now on github.
	</div></section>
-->
	
	
	<section class="slide cover dark" id="Picture"><div>
		<h2 style="text-align:right; margin-right: -30px">Coremob<br/>Camera</h2>
		<img src="images/coremobcamera.jpg" alt="Coremob Camera app on Android">
		
		<footer>
			As a side project, my colleague from Nokia, John Kneeland, and a W3C rep for Facebook (and now a W3C fellow) Tobie Langel, and I have initiated to develop an open-source camera application built using Web technology. 
		</footer>
	</div></section>
	

	<section class="slide"><div>
		<h2>Project Goals</h2>

		<ol class="large-list">
			<li>Showcase the capabilities of the Web platform</li>
			<li>Educate Web developers</li>
			<li>Help improve browsers</li>
		</ol>
		
		<footer>
			We have set three main goals to this project:

			1. showcase the capabilities of the Web platform and more specifically of the subset of features Coremob is driving,
			2. educate Web developers about how to best use these technologies to build modern Web applications, 
			and
			3. help improve browsers by providing vendors with an app which tests some of the key features and performance requirements of the platform.
		</footer>
	</div></section>
	
	
	
	<section class="slide"><div>
		<video controls style="margin-top:-20px; width:800px">
			<source src="media/coremobcamera.mp4" />
			Mp4 video is not supported.
		</video>
		
		<!-- <p style="text-align:right">Try on mobile: http://goo.gl/MX7fe (Temp url)</p> -->
		<p style="text-align:right">Watch the Video: http://sdrv.ms/UF55gM</p>
		<footer>
		</footer>
	</div></section>
	
	
	
	<section class="slide"><div>
		<h2>HTML Media Capture</h2>
		<img src="images/coremobcamera-01.png" alt="Coremob Camera app" align="right" style="width:240px;margin-right:-40px;margin-top:-60px">
		
		<p>Taking a photo with using a native camera</p>
		<pre>
		<code class="language-markup">
&lt;input type="file" accept="image/*" 
                           capture="camera"&gt;
// New spec
&lt;input type="file" accept="image/*" capture&gt;
		</code>
		</pre>
		
		<div class="browser-container">
			<div class="browser chrome"><span>18</span></div>
			<div class="browser o"><span>15bl</span></div>
			<div class="browser android"><span>3</span></div>
			<div class="browser bb"><span>10</span></div>
			<div class="browser safari"><span>6*</span></div>
			<div class="browser moz"><span>10*</span></div>
			<div class="browser ie dim"><span>10*</span></div>
		</div>
		
		<footer>
Taking a picture is done by delegating to the native camera via HTML Media Capture. 
The native camera returns the pictures as a File object (from File API). 

Easy implementation for us - 
use the file upload input - the input element with the type attribute, 'file', then specify the accept attribute.
The values of the attribute can be:
 -images/* , video/*, or audio/*.
			
The capture attribute is a boolean attribute.
If specified, a browser captures of media directly from the device's environment.	
			
(The actual demo is using the older spec, with the capture value of 'camera'. It is deprecated.)
			
- this is not WebRTC/ getUserMedia, by the way.
		</footer>
	</div></section>
	
	
	<section class="slide"><div>
		<h2>File API</h2>

		<p>Returning the photo as a <code>file</code> object</p>		

		<pre style="mar">
		<code class="language-javascript">var input = document.querySelector('input[type=file]'); 
camera.addEventListener('change', function() {
    var localFile = input.files[0];
    var reader = new FileReader();
    reader.readAsDataURL(localFile);
    reader.onload = function(e){
        preview.src = e.target.result;
    }
}, false);
		</code>
		</pre>
		
		<footer>
The image can also be displayed on the client-side without uploading. 
			
When a user snap a photo, the API returns a file object list.
- You can access the file object on a 'change' event.  (In this demo, I added a event listener.)
- reading a FileReader object as an instance.
- Then call readAsDataURL() to display the image in dataURL.
		</footer>
	</div></section>	
	
	
	<section class="slide"><div>
		<h2>Canvas</h2>
		<img src="images/coremobcamera-02.png" alt="Coremob Camera app" align="right" style="width:240px;margin-right:-40px;margin-top:-90px;cursor:pointer;" onclick="javascript:this.src='images/coremobcamera-02a.png';return false;">
		
		<p>Applying filters to the photo</p>
	
		<pre>
		<code class="language-javascript">
var c = document.createElement('canvas');
var ctx = this.c.getContext('2d');
ctx.drawImage(imgObj, 0, 0);
var imgData = ctx.getImageData(x, y, w, h); 
//...Pixel manipulation ...
ctx.putImageData(imgData, 0, 0); 
		</code>
		</pre>
		
		<div class="browser-container">
			<div class="browser chrome"><span></span></div>
			<div class="browser android"><span></span></div>
			<div class="browser safari"><span></span></div>
			<div class="browser moz"><span></span></div>
			<div class="browser bb"><span>7</span></div>
			<div class="browser ie"><span>9</span></div>
			<div class="browser o"><span></span></div>
		</div>
		
		<footer>
This is an example of how you paint the pixel data-
- First you define the canvas, 
- and importing an photo into a canvas, by using drawImage() method to draw the image object.
- Then, use getImageData() method to obtain an ImageData object containing a copy of the pixel data for a context.
- Then "applying filter" by tweaking the pixel data, which I will talk a bit more on the next slide.
- And finally, using putImageData() method, paint pixel data back into a context.
		</footer>
	</div></section>
	
	<section class="slide"><div>
		<h2>Canvas Pixel Manipulation</h2>
		
		<img src="images/canvas-pixel-manipulation.png" alt="canvas diagram" style="margin-top:-120px;margin-left: -120px;">

		<footer>
			- The 'data' property of ImageData stores the color info of an each pixel in the canvas.
(In this diagram, the 9x9 pixel canvas).
- Each pixel in the data array consists of 4 bytes values- red, green, blue, and alpha channel, and each of the R, G, B and A values can take values between 0 and 255.
		</footer>
	</div></section>
	
	<section class="slide"><div>
		<h2>Canvas Pixel Manipulation</h2>
		
		<pre><code class="language-javascript">// Grayscale using CIE 1931 luminance
var d = imgData.data;
for (var i = 0; i < d.length; i += 4) {
    var r = d[i];
    var g = d[i + 1];
	var b = d[i + 2];
	var avg = 0.2126*r + 0.7152*g + 0.0722*b;
	d[i] = d[i + 1] = d[i + 2] = avg;
}
		</code>
		</pre>

		<footer>
This is an example for giving grayscale filter to the image on canvas.
- See how the for loop iteration index skips by 4, and how I get each RGB values.
(I don't use alpha in this case).
- The magic equation you see here is something called "CIE 1931 luminance", and what it does is convert the pixels into grayscale that looks nice on human eyes.
			
- This calculation needs to be done on each canvas pixel.
- Now you've noticed the operation that has to iterate is huge- lets say if your image is 100x100, you need to loop for 10,000 times! 
In the app, I have cropped off the large megapixel photo into 612x612. (it's 374,544 pixels!)
IT IS SLOW!
		</footer>
	</div></section>
	
	
<!--
	<section class="slide"><div>
		<h2>Faster Canvas (Wish List)</h2>
		
		<ul>
			<li>Hardware acceleration</li>
			<li>Faster GPU</li>
			<li>32-bit pixel manipulation (Uint8ClampedArray vs. CanvasPixelArray)</li>
			<li>Background operation (Worker)</li>
		</ul>

		<footer>
HW Accel
IE10 - yes
Chrome on Android - yes
http://stackoverflow.com/questions/9823219/is-html-5-canvas-hardware-accelerated-on-android-chrome-beta

(32-bit pixel manipulation)
- The example ==  traditional  8-bit operation.
- The object returned by the data property of a Canvas ImageData, I was referring earlier, is CanvasPixelArray in most mobile browsers currently, but will be deprecated in favor for Uint8ClampedArray.
- With the typed array, Uint8ClampedArray, you can use bitwise left-shifts, the 32-bit pixel manipulations, which is faster.
		
- As long as I know, Firefox and Opera Mobile has made the switch.
   Chrome 18 - CanvasPixelArray
   Android 4 - CanvasPixelArray
   IE10 - CanvasPixelArray
		
		https://hacks.mozilla.org/2011/12/faster-canvas-pixel-manipulation-with-typed-arrays/
		</footer>
	</div></section>
-->
	
	
	<section class="slide"><div>
		<h2>canvas.toBlob</h2>
		
		<p>Converting the filtered photo (canvas) to blob</p>

		<pre><code class="language-javascript">
if (canvas.toBlob) {
    var blob = canvas.toBlob(function(blob){
        // async callback
    }, 'image/jpeg');
}
		</code></pre>
		
		<div class="browser-container" style="text-align:right;margin-top:-30px">
			<div class="browser moz"><span>18</span></div>
		</div>
		
		<footer>
			For non-supporting browsers, I needed to convert a canvas to a dataURL string once, then invoke the Blob constructor to finally convert it to blob.
		</footer>
	</div></section>
	
	
	<section class="slide"><div>
		<h2>Blob URLs</h2>
		
		<p>Displaying Blob</p>
		
		<code>&lt;img src="blob:958c1b50-09a0-2543-8528-8697ae387667"&gt;</code>

		<pre><code class="language-javascript">
var URL = window.URL || window.webkitURL*;
var imgURL = URL.createObjectURL(blob);
		</code></pre>
		
		<div class="browser-container">
			<div class="browser chrome"><span>18*</span></div>
			<div class="browser chrome"><span>23</span></div>
			<div class="browser o"><span>15bl</span></div>
			<div class="browser android"><span>4*</span></div>
			<div class="browser safari"><span>6*</span></div>
			<div class="browser bb"><span>10*</span></div>
			<div class="browser moz"><span></span></div>
			<div class="browser ie"><span>10</span></div>
		</div>
		
		<footer>
- The object URL represents the specified Blob object.
- Creates a new object URL, whose lifetime is tied to the document in the window on which it was created. 
- Release the url with revokeObjectURL() if you no longer need them.
		</footer>
	</div></section>
	
	
	<section class="slide"><div>
		<h2>IndexedDB</h2>
		<img src="images/coremobcamera-03.png" alt="Coremob Camera app" align="right" style="width:240px;margin-right:-40px;margin-top:-60px">
		<p>Storing the photos locally</p>
	
		<pre>
		<code class="language-javascript">
if(window.indexedDB) {
   var req = indexedDB.open('coremobCamera'); 
   req.onsuccess = function(e) {
      // async
   }
} 
		</code>
		</pre>
		
		<footer>
opening a DB...
		</footer>
	</div></section>
	
	
		<section class="slide"><div>
		<h2>IndexedDB</h2>
		<p>
			Chrome 18 and BlackBerry requires the webkit prefix.<br>
		</p>
		
		<pre>
		<code class="language-javascript">
var indexedDB = window.indexedDB || window.webkitIndexedDB;

		</code>
		</pre>
		
		<p>"Basic" Async iDB Support</p>
		<div class="browser-container">
			<div class="browser chrome"><span>18*</span></div>
			<div class="browser chrome"><span>25</span></div>
			<div class="browser o"><span>15bl</span></div>
			<div class="browser bb"><span>10*</span></div>
			<div class="browser moz"><span>16</span></div>
			<div class="browser ie"><span>10</span></div>
		</div>
		<footer>

		</footer>
	</div></section>
	
	
	<section class="slide"><div>
		<h2>IndexedDB: <br>Spotty Browser Support</h2>
		
		<ul>
			<li>Safari and Opera (presto) do not support at all</li>
			<li>Chrome &lt;24, Firefox &lt;13, and BB 10 use deprecated specs</li>
			<ul>
				<li><code>setVersion()</code> vs. <code style="background-color:#aefaa3">onupgradeneeded</code></li>
				<li><code>IDBTransaction.READ_WRITE</code> vs. <code style="background-color:#aefaa3">"readwrite"</code></li>
			</ul>
			<li>Chrome &amp; Opera (blink) does not support <code>blob</code>
		</ul>
	
		
		<footer>
			https://developer.mozilla.org/en-US/docs/IndexedDB/IDBDatabase
			
- There are multiple specifications have been modified since, for example, Firefox has started supporting iDB. 
   - The basic support starts since ver4, setVersion() was deprecated at ver 10, 
   - and transaction mode has been switched to string from constant since 13.
			
- Blob, which in this case the filtered photo, is unfortunately not supported by Chrome at all. (used Base64 dataURL string)...
		</footer>
	</div></section>

	
	
	<section class="slide"><div>
		<h2>XMLHttpRequest Level 2</h2>
		<img src="images/coremobcamera-05.png" alt="Coremob Camera app" align="right" style="width:240px;margin-right:-40px;margin-top:-40px">
		<p>Sending a photo</p>

		
		<pre><code class="language-javascript">
var formData = new FormData();
formData.append('photo', blob); 
		</code></pre>
		
		<div class="browser-container">
			<div class="browser chrome"><span></span></div>
			<div class="browser android"><span>3</span></div>
			<div class="browser safari"><span>5</span></div>
			<div class="browser bb"><span></span></div>
			<div class="browser moz"><span></span></div>
			<div class="browser ie"><span>10</span></div>
			<div class="browser o"><span>12</span></div>
			<div class="browser o"><span>15bl</span></div>
		</div>

		<footer>
OK, let's send the photo to a server.
	
- XHR2 adds support for the new FormData interface.
- The FormData object lets you compile a set of key/value pairs to send using XMLHttpRequest easily.

- Here, I don't have a physical form element, however, I can just instantiate a FormData object then use append() method to append fields on the fly.
		</footer>
	</div></section>
	
	
	<section class="slide"><div>
		<h2>XMLHttpRequest Level 2</h2>
		<p>Sending a photo</p>
		
		<pre><code class="language-javascript">
var xhr = new XMLHttpRequest();        
xhr.open('POST', '/gallery'); 
xhr.upload.addEventListener('progress', handleProgress, false);
xhr.addEventListener('load', handleFinish, false);
xhr.addEventListener('error', handleError, false);
xhr.addEventListener('abort', handleAbort, false);
xhr.send(formData);
		</code></pre>
		
		<footer>
With XHR2, the data you can send is not limited to DOMstring or XML.
- The send() method can accept the binary data.
			
- Here, I am registering the some events-
with XHR2 we have some cool feature like uploading progress events.
		</footer>
	</div></section>


	<section class="slide"><div>
		<h2>XMLHttpRequest Level 2</h2>
		<img src="images/coremobcamera-06.png" alt="Coremob Camera app" align="right" style="width:240px;margin-right:-40px;margin-top:-40px">
		<p>Sending a photo</p>
		
		<pre><code class="language-javascript">
function handleProgress(e) { 
  if (e.lengthComputable) {
     el.textContent = 
     (e.loaded / e.total * 100) >>> 0 + '%';
  } 
}
		</code></pre>
		
		<footer>
I only display the % in integer to fit the app UI, but it is cool if you use the HTML5 progress element to display. 
		</footer>
	</div></section>	
	
	
	
	<section class="slide"><div>
		<h2>CORS: <br>Cross Origin Resource Sharing</h2>

		
		<code>Access-Control-Allow-Origin: http://some-domain.org</code>
		
<pre><code class="language-javascript">
//Apache .htaccess
&lt;IfModule mod_headers.c&gt;
  Header set Access-Control-Allow-Origin "*"
&lt;/IfModule&gt;
		</code></pre>
		
		<div class="browser-container">
			<div class="browser chrome"><span></span></div>
			<div class="browser android"><span></span></div>
			<div class="browser safari"><span></span></div>
			<div class="browser moz"><span></span></div>
			<div class="browser ie"><span></span></div>
			<div class="browser bb"><span></span></div>
			<div class="browser o"><span>12</span></div>
			<div class="browser o"><span>15bl</span></div>
		</div>
		
		<footer>
- Typically, a web application using XMLHttpRequest can only make HTTP requests to the domain it was loaded from, and not to other domains.

- CORS allows web applications on one domain to make cross domain AJAX requests to another domain.
- To make simple CORS requests, the server only needs to add the header to its response.
The example shown here is how to set on Apache server.
			
			http://enable-cors.org
		</footer>
	</div></section>
	

		
	
	<section class="slide"><div>
		<h2>Touch Events v.1</h2>
		<img src="images/coremobcamera-04.png" alt="Coremob Camera app" align="right" style="width:240px;margin-right:-40px;margin-top:-60px">
		<p>Photo Gallery Carousel</p>
		
		<pre><code class="language-javascript">
el.addEventListener('touchstart', 
                    startHandler, false);
el.addEventListener('touchmove'...);
el.addEventListener('touchend'...);
		</code></pre>
		
		<p>You probably want to include mouse events too (<code>mousedown</code>, <code>mousemove</code>, and <code>mouseup</code>).
		
		<footer>
- The Apple's touch event has been the de facto standard of the touch event for years.
- Then there was a drama between Apple and the rest, who wanted standardized the touch events, regarding the specifications and legal concerns.
		</footer>
	</div></section>
	
	
	<section class="slide"><div>
		<h2>Pointer Events</h2>
		<img src="images/pointer.png" alt="Micorsoft Pointer event diagram" align="right" style="z-index:-1;margin-right:-75px;margin-top:10px">
		
		<p>For <em>any</em> input devices: touch, mouse, pen...</p>
		<pre><code class="language-javascript">
if (navigator.pointerEnabled) {
    el.addEventListener('pointerdown', 
                         startHandler, false);
    el.addEventListener('pointermove', ...);
    el.addEventListener('pointerup', ...);
}
		</code></pre>
		
		<footer>
			Then, the end of last year, Microsoft has submitted the alternative way of the touch event standard proposal to W3C.
		</footer>
	</div></section>
	
	
	<section class="slide"><div>
		<h2>Pointer Events</h2>
		<p>Only IE10 supports so far...</p>
		<pre><code class="language-javascript">
if (navigator.msPointerEnabled) {
    el.addEventListener('MSPointerDown', startHandler, false);
    el.addEventListener('MSPointerMove', moveHandler, false);
    el.addEventListener('MSPointerUp', endHandler, false);
}
		</code></pre>
		
		<div class="browser-container" style="text-align:right;margin-top:-30px">
			<div class="browser ie"><span>10</span></div>
		</div>
		
		<p>** Experimental Chromium build (26.0.1409.0) - no vendor prefix</p>
		
		<footer>

		</footer>
	</div></section>
	
	
	<section class="slide"><div>
		<h2>More...</h2>
		
		<ul>
			<li>History API (<code>popstate</code> event)</li>
			<li>Screen Orientation API (<code>orientationchange</code> event)</li>
			<li>CSS3 Transforms and Animations</li>
			<li>Web Fonts (<code>@font-face</code>)</li>
			<li><code>hidden</code> attribute</li>
			<li><code>data-*</code> custom attribute</li>
		</ul>
		
		<footer>

		</footer>
	</div></section>


	<section class="slide"><div>
		<h2>PhoneGap</h2>
		<img src="images/cordova-wp8.png" alt="Windows Phone 8" align="right" style=";margin-top:-70px;">
		
		<p>HTML5 + Native</p>
		<p>Filling the gap of missing HTML5 features</p>
		
		<footer>
So what if the shiny new HTML5 features are not well supported by mobile browsers?
Well, there is PhoneGap for that!
						
- PhoneGap by Adobe, is an open source, cross-platform, mobile development framework that enables us to create hybrid apps, 
- and it plays an important role in enabling access to Web technology on more devices.
			
- You can basically build web apps using standard web technology, wrap it up with PhoneGap and deploy.
			
- For Windows Phone8, I used the PhoneGap's Camera API to fill up the missing media capture. I created the app in minimal time after finishing the web app for the web app demo.
		</footer>
	</div></section>
	
	
	<section class="slide"><div>
		<p align="center" aria-hidden="true" data-icon="&#xe003;" class="github">
			<span style="color:#f18">github</span>.com/coremob/camera
		</p>

		<footer>
			source code
		</footer>
	</div></section>

	<section class="slide"><div>
		<p align="center" style="font-size:38px">
			<img src="images/qrcode-camera.png"/><br>			
			coremob.<span style="color:#f18">github</span>.io/camera/vanilla/index.html<br>
			<span style="color:#f18">goo.gl</span>/My8mf
		</p>

		<footer>
			source code
		</footer>
	</div></section>
	
	
	<section class="slide"><div>
		<h2>Thank you!</h2>
		<img src="images/tomomi.jpg" align="right">
		<p>Tomomi Imura</p>
		<ul style="margin-top:2em">
			<li><a href="http://girliemac.com">girliemac.com</a></li>
			<li><a href="http://twitter.com/girlie_mac">twitter.com/girlie_mac</a></li>
			<li><a href="http://github.com/girliemac">github.com/girliemac</a></li>
			<li><a href="https://github.com/coremob/camera">github.com/coremob/camera</a></li>
		</ul>
	</div></section>
	
	<p class="badge"><a href="https://github.com/shower/shower">Fork me on Github</a></p>
	
	<!--
		To hide progress bar from entire presentation
		just remove “progress” element.
		-->
	<div class="progress"><div></div></div>
	<script src="../bower_components/shower-core/shower.min.js"></script>
	<script src="../prism/prism.js"></script>
</body>
</html>



